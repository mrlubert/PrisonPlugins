package com.mrlubert.prisoncontrol; 

import java.io.File;
import org.bukkit.configuration.file.FileConfiguration;
import org.bukkit.plugin.java.JavaPlugin;

import tech.mcprison.prison.Prison;
import tech.mcprison.prison.mines.PrisonMines;
import tech.mcprison.prison.ranks.PrisonRanks;


public class PrisonPicks extends JavaPlugin 
{
	private CellCommand cellCmd;
    private static PrisonPicks instance; 
    static File customYml;
    static FileConfiguration customConfig;
    PrisonMines prisonMines = Util.getPrisonMines(); 
    PrisonRanks prisonRanks = Util.getPrisonRanks(); 
    Prison prison = Util.getPrison();
    
    @Override
    public void onLoad()
    {
        
        Config.setConfigFolder(this.getDataFolder().getAbsolutePath()); 
        Config.reloadConfigs(); 

        if (prisonMines != null)
        {
            try 
            {
                this.getLogger().info("Loading PrisonControl"); 
                
            }catch (Exception e)
            {
            	this.getLogger().info("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-");
            	this.getLogger().info("-=-=-=-=-=-=-=PrisonControl=-=-=-=-=-=-");
            	this.getLogger().severe("ERROR With Prison Plugin!");
                this.getLogger().severe("Unable to load plugin! Are you running at least Prison 3.3.0-alpha.18b?"); 
                this.getLogger().info("-=-=-=-=-=-=-=PrisonControl=-=-=-=-=-=-");
                this.getLogger().info("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-");
                e.printStackTrace(); 
                this.onDisable(); 
            }
        }
    }
    
    @Override
    public void onEnable()
    {
        instance = this; 
        this.getLogger().info("Loaded Mines: " + PrisonMines.getInstance().getMines().toString());
        PrisonMines.getInstance().resetAllMines(null, null);
        this.getServer().getPluginManager().registerEvents(new Events(), this);
        this.getCommand("pick").setExecutor(new PickCommands()); 
    }

    @Override
    public void onDisable()
    {
    }
    
    public static PrisonPicks getInstance()
    {
        return instance; 
    }
    
}